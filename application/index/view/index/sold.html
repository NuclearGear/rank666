{include file="public/header"}

<!-- Page Container -->
<div class="page-container">
    <!-- Page Sidebar -->
    {include file="public/sidebar"}
    <!-- /Page Sidebar -->

    <!-- Page Content -->
    <div class="page-content">
        <!-- Page Inner -->
        <div class="page-inner">
            <div class="page-title">
                <h3 class="breadcrumb-header">毒—App</h3>
            </div>
            <div id="main-wrapper">
                <div class="row">
                    <div class="col-md-12">
                        <div class="panel panel-white">
                            <div class="panel-heading clearfix">
                                <h4 class="panel-title">销量统计</h4>
                            </div>
                            <div class="panel-body" id="echart_1" style="height: 1100px;">

                            </div>
                        </div>
                    </div>
                </div><!-- Row -->
            </div><!-- Main Wrapper -->
        </div><!-- /Page Inner -->
    </div><!-- /Page Content -->
</div><!-- /Page Container -->

{include file="public/script"}
{include file="public/footer"}

<script>
    var myChart = echarts.init(document.getElementById('echart_1'));

    var title_arr = [];
    var sold_arr = [];
    $.get("{:url('index/ajaxBySoldNum')}",{}, function (ret) {
        for(var i in ret.data){
            title_arr.unshift(ret.data[i]['articleNumber']);
            sold_arr.unshift(ret.data[i]['soldNum']);
        }

        option = {
            title: {
                text: '总销量排名-TOP50',
            },
            tooltip: {
                trigger: 'axis',
                axisPointer: {
                    type: 'shadow'
                }
            },
            legend: {
                data: ['2011年']
            },
            grid: {
                left: '3%',
                right: '4%',
                bottom: '3%',
                containLabel: true,
            },
            xAxis: {
                type: 'value',
                boundaryGap: [0, 0.01]
            },
            yAxis: {
                type: 'category',
                name:'销售量（双）',
                data: title_arr,
            },
            series: [
                {
                    name: '销量',
                    type: 'bar',
                    data: sold_arr,
                    animationDelay: function (idx) {
                        return idx * 10;
                    }
                },
            ]
        };
        myChart.setOption(option,true)
    });
</script>
